<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Timbangan Kalori Makanan</title>

<style>
body{
  font-family: Arial, sans-serif;
  text-align: center;
  background: #f5f5f5;
}
h2{margin:10px}

/* ===== MAKANAN ===== */
.foods img{
  width:60px;
  margin:6px;
  cursor:grab;
}

/* ===== TIMBANGAN ===== */
.scale-wrap{
  display:flex;
  justify-content:center;
  margin:20px;
}
.scale{
  position:relative;
  width:420px;
  height:220px;
}
.bar{
  position:absolute;
  top:40px;
  left:50%;
  width:320px;
  height:6px;
  background:#333;
  transform-origin:center;
  transform:translateX(-50%);
  transition:0.3s;
}
.holder{
  position:absolute;
  top:70px;
  width:150px;
  min-height:90px;
  border:2px dashed #aaa;
  border-radius:12px;
  padding:5px;
}
.left{left:5px}
.right{right:5px}

/* ===== STATUS ===== */
.status{
  font-weight:bold;
  margin-top:10px;
}
.ok{color:green}
.no{color:red}

/* ===== ANIMASI JATUH ===== */
.fall{
  animation: dropAnim 0.6s ease-out;
}
@keyframes dropAnim{
  from{
    transform: translateY(-50px) scale(0.8);
    opacity:0;
  }
  to{
    transform: translateY(0) scale(1);
    opacity:1;
  }
}
</style>
</head>

<body>

<h2>⚖️ Timbangan Kalori Makanan</h2>
<p>Seret makanan ke timbangan. Atur nilai <b>x</b> sampai <b>SEIMBANG</b>.</p>

<p>
Nilai <b>x</b> (kalori makanan ❓):
<input type="number" id="xVal" value="50" onchange="updateTotals()">
</p>

<!-- DAFTAR MAKANAN -->
<div class="foods">
  <img src="https://em-content.zobj.net/thumbs/120/apple/354/red-apple_1f34e.png"
       draggable="true" ondragstart="drag(event)"
       data-cal="50" id="apel">
  <img src="https://em-content.zobj.net/thumbs/120/apple/354/bread_1f35e.png"
       draggable="true" ondragstart="drag(event)"
       data-cal="100" id="roti">
  <img src="https://em-content.zobj.net/thumbs/120/apple/354/egg_1f95a.png"
       draggable="true" ondragstart="drag(event)"
       data-cal="80" id="telur">
  <img src="https://em-content.zobj.net/thumbs/120/apple/354/question-mark_2753.png"
       draggable="true" ondragstart="drag(event)"
       data-cal="x" id="misterius">
</div>

<p style="font-size:13px">
Apel = 50 kal | Roti = 100 kal | Telur = 80 kal | ❓ = x kal
</p>

<!-- TIMBANGAN -->
<div class="scale-wrap">
  <div class="scale">
    <div id="bar" class="bar"></div>

    <div class="holder left" id="left"
         ondrop="drop(event,'left')" ondragover="allowDrop(event)"></div>
    <div class="holder right" id="right"
         ondrop="drop(event,'right')" ondragover="allowDrop(event)"></div>
  </div>
</div>

<p>
Kiri: <span id="leftCal">0</span> kal |
Kanan: <span id="rightCal">0</span> kal
</p>

<div id="result" class="status"></div>

<script>
let leftBase = 0, rightBase = 0;
let leftX = 0, rightX = 0;

function allowDrop(e){
  e.preventDefault();
}

function drag(e){
  e.dataTransfer.setData("id", e.target.id);
}

function drop(e, side){
  e.preventDefault();
  let id = e.dataTransfer.getData("id");
  let item = document.getElementById(id);
  let cal = item.dataset.cal;

  // clone supaya jumlah terlihat
  let clone = item.cloneNode(true);
  clone.removeAttribute("id");
  clone.setAttribute("draggable","false");
  clone.classList.add("fall"); // ANIMASI JATUH
  e.target.appendChild(clone);

  if(cal === "x"){
    side === "left" ? leftX++ : rightX++;
  } else {
    let v = Number(cal);
    side === "left" ? leftBase += v : rightBase += v;
  }
  updateTotals();
}

function updateTotals(){
  let x = Number(document.getElementById("xVal").value);
  let L = leftBase + leftX * x;
  let R = rightBase + rightX * x;

  document.getElementById("leftCal").innerText = L;
  document.getElementById("rightCal").innerText = R;

  let bar = document.getElementById("bar");
  let res = document.getElementById("result");

  if(L === R && (leftX + rightX) > 0){
    bar.style.transform = "translateX(-50%) rotate(0deg)";
    res.innerText = "⚖️ SEIMBANG!";
    res.className = "status ok";
  } else if(L > R){
    bar.style.transform = "translateX(-50%) rotate(-10deg)";
    res.innerText = "⬅️ KIRI LEBIH BERAT";
    res.className = "status no";
  } else {
    bar.style.transform = "translateX(-50%) rotate(10deg)";
    res.innerText = "➡️ KANAN LEBIH BERAT";
    res.className = "status no";
  }
}
</script>

</body>
</html>
